sudo: required
install:
- sudo wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/cuda-repo-ubuntu1804_10.0.130-1_amd64.deb
- sudo apt-get -y install dpkg
- sudo dpkg -i cuda-repo-ubuntu1804_10.0.130-1_amd64.deb
- sudo apt install gnupg-curl
- sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub
- sudo apt-get update
- sudo add-apt-repository universe
- sudo apt-get update
- sudo apt-get install freeglut3 freeglut3-dev libxi-dev libxmu-dev
- sudo apt-get auot-install aptitude
- sudo apt-get auto-install cuda-runtime-10-0
- sudo apt-get auto-nstall cuda-demo-suite-10-0
- sudo apt-get auto-install cuda-10-0
- curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey |   sudo apt-key add -
- curl -s -L https://nvidia.github.io/nvidia-docker/ubuntu18.04/amd64/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.list
- sudo apt-get update
- sudo apt-get remove docker docker-engine docker.io
- curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
- sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu xenial stable"
- sudo apt-get update
- sudo apt install docker-ce
- sudo apt-get install -y nvidia-docker2
- sudo pkill -SIGHUP dockerd
- sudo docker run --runtime=nvidia --rm nvidia/cuda:10.0-base nvidia-smi
- docker build -t mrover .
script:
- docker run --rm --runtime=nvidia -it -v $(pwd):/root -v /dev/tty:/dev/ttyUSB0 -v /dev/null:/run/udev:ro -v /dev/tty:/dev/i2c-0 -v /dev/tty:/dev/i2c-1 -v /dev/tty:/dev/i2c-2
  mrover jarvis build -a .
notifications:
  slack:
    secure: TKHqHOuPuvJl87ATPscoCmWrCCd1NKROuFcuWpCZRXcgfWlVQ5g/Gql7izzWuWMXaqVqt9XksRRYYgGujdQcxJwxkODzyh6G6a0sROqJxFqVAVGB5RXEGr1QIoWR6l5VQi0T1sKnzGVVsJ6BTeUe6t2m2XKPZbWNKtyjjxINb72ps6gKEHvbu4H8mRVJKHQg3MJuvyez9JEiRGemxIndXF5BicebWigG3iET3AJBTKRKB39hfDyPeU769DFfg6x0cGZXJpe3+sGB8MqUkZYzgsMjEPEfjI/n8DdXiMyrHcrpTkYhP+oZGDWvpa5ZWKaNXYosYPtnTS/sWBWalWv9dHe05XwPWYQdYKs33XPX8frvbVJ3HtgkBVy+F1GvLZjQQD6zWhPoz5wJS5HCecuxJnyo0/K9qrch+hUKnsXL7YTofy6vPXgVkunkrmMVrI/+NsOBrNA+0qwcPRtm2BJzyWok0e7qtRGCV+qixhGJrcOQa1Y6crtz/v1as+snsmBseGfDOupZcL5IwhidygUyATx+BglX20GFM5FUImvzhFtS9i40xPu1QYbd9MHnoFrxJnMWq7b8BPYHQWP0wZcs7h0U3TcDErPNmbi2RlJB7nTxGO+W/82NU3Bn2BBX8FEH+rxgGrMtBF3hqAkF0aoVNowKm1tj1X3WEENbb5SYFyQ=
